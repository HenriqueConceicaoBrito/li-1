name: GitHub Actions - Workflow run In Progress Template
run-name: Running Workflow run In Progress Template

on:
  workflow_run:
    workflows: ["Trigger"]
    types: [in_progress]
    # branches: [main]  # Opcional: filtro por branch

jobs:
  monitorar_execucao_Trigger:
    runs-on: ubuntu-latest
    
    steps:
      - name: Identificar status da execu√ß√£o
        run: |
          echo "üîÑ WORKFLOW TRIGGER EST√Å EM PROGRESSO"
          echo "========================================="
          echo "A√ß√£o do evento: ${{ github.event.action }}"
          echo "Status atual: ${{ github.event.workflow_run.status }}"
          echo "Hora do evento: $(date)"
          echo "Branch: ${{ github.event.workflow_run.head_branch }}"
          echo "Commit: ${{ github.event.workflow_run.head_sha }}"
          echo "URL do run: ${{ github.event.workflow_run.html_url }}"
          echo "Tentativa: ${{ github.event.workflow_run.run_attempt }}"
          echo "========================================="
      
      - name: Simular monitoramento em tempo real
        run: |
          echo "üìà MONITORAMENTO EM TEMPO REAL"
          echo "-------------------------------"
          echo "Este workflow √© executado quando:"
          echo "1. O Trigger passou da fase 'requested'"
          echo "2. O Trigger est√° executando seus jobs ativamente"
          echo "3. Os steps do Trigger est√£o sendo processados"
          echo ""
          echo "Casos de uso t√≠picos:"
          echo "‚Ä¢ Acompanhamento de execu√ß√£o longa"
          echo "‚Ä¢ Coleta de m√©tricas intermedi√°rias"
          echo "‚Ä¢ Notifica√ß√µes de progresso"
          echo "‚Ä¢ Verifica√ß√£o de sa√∫de durante execu√ß√£o"
          echo "-------------------------------"
          
          # Simular algum processamento de monitoramento
          for i in {1..3}; do
            echo "Coletando m√©trica $i/3..."
            sleep 2
          done
          echo "Monitoramento conclu√≠do!"
      
      - name: Verificar jobs em execu√ß√£o
        run: |
          echo "üîç ESTADO ATUAL DO TRIGGER"
          echo "-------------------------"
          echo "Nome do workflow: ${{ github.event.workflow_run.name }}"
          echo "ID da execu√ß√£o: ${{ github.event.workflow_run.id }}"
          echo "Criado em: ${{ github.event.workflow_run.created_at }}"
          echo "Atualizado em: ${{ github.event.workflow_run.updated_at }}"
          echo "-------------------------"
          echo "OBSERVA√á√ÉO IMPORTANTE:"
          echo "O tipo 'in_progress' √© disparado quando o workflow"
          echo "Trigger come√ßa a executar SEUS JOBS (ap√≥s 'requested')"
          echo ""
          echo "Diferen√ßa entre os tipos:"
          echo "‚Ä¢ requested ‚Üí workflow foi aceito pela fila"
          echo "‚Ä¢ in_progress ‚Üí jobs est√£o rodando ativamente"
          echo "‚Ä¢ completed ‚Üí todos os jobs terminaram"
          echo "-------------------------"
